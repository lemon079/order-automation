{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/apps/web/src/lib/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr';\r\nimport { cookies } from 'next/headers';\r\n\r\nexport async function createClient() {\r\n    const cookieStore = await cookies();\r\n\r\n    return createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookies: {\r\n                getAll() {\r\n                    return cookieStore.getAll();\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    try {\r\n                        cookiesToSet.forEach(({ name, value, options }) =>\r\n                            cookieStore.set(name, value, options)\r\n                        );\r\n                    } catch {\r\n                        // The `setAll` method was called from a Server Component.\r\n                        // This can be ignored if you have middleware refreshing\r\n                        // user sessions.\r\n                    }\r\n                },\r\n            },\r\n        }\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,4IAAO;IAEjC,OAAO,IAAA,iMAAkB,sUAGrB;QACI,SAAS;YACL;gBACI,OAAO,YAAY,MAAM;YAC7B;YACA,QAAO,YAAY;gBACf,IAAI;oBACA,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC1C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAErC,EAAE,OAAM;gBACJ,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACrB;YACJ;QACJ;IACJ;AAER"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/schemas/order.ts"],"sourcesContent":["import { z } from 'zod';\r\n\r\n// Item schema\r\nexport const orderItemSchema = z.object({\r\n    name: z.string().min(1, 'Item name is required'),\r\n    quantity: z.number().int().positive('Quantity must be positive'),\r\n    weight: z.number().positive().optional(),\r\n    notes: z.string().optional(),\r\n});\r\n\r\nexport type OrderItem = z.infer<typeof orderItemSchema>;\r\n\r\n// Order status enum\r\nexport const orderStatusSchema = z.enum([\r\n    'pending',\r\n    'confirmed',\r\n    'assigned',\r\n    'picked_up',\r\n    'in_transit',\r\n    'delivered',\r\n    'cancelled',\r\n]);\r\n\r\nexport type OrderStatus = z.infer<typeof orderStatusSchema>;\r\n\r\n// Create order schema (for POST requests)\r\nexport const createOrderSchema = z.object({\r\n    // Customer details\r\n    customer_name: z.string().min(1, 'Customer name is required'),\r\n    customer_phone: z.string().min(10, 'Valid phone number required'),\r\n    customer_email: z.string().email().optional().or(z.literal('')),\r\n\r\n    // Pickup location\r\n    pickup_address: z.string().min(5, 'Pickup address is required'),\r\n    pickup_lat: z.number().optional(),\r\n    pickup_lng: z.number().optional(),\r\n    pickup_contact_name: z.string().optional(),\r\n    pickup_contact_phone: z.string().optional(),\r\n\r\n    // Drop-off location\r\n    dropoff_address: z.string().min(5, 'Drop-off address is required'),\r\n    dropoff_lat: z.number().optional(),\r\n    dropoff_lng: z.number().optional(),\r\n    dropoff_contact_name: z.string().optional(),\r\n    dropoff_contact_phone: z.string().optional(),\r\n\r\n    // Items\r\n    items: z.array(orderItemSchema).min(1, 'At least one item is required'),\r\n\r\n    // Time windows\r\n    pickup_time_window_start: z.string().datetime().optional(),\r\n    pickup_time_window_end: z.string().datetime().optional(),\r\n    dropoff_time_window_start: z.string().datetime().optional(),\r\n    dropoff_time_window_end: z.string().datetime().optional(),\r\n\r\n    // Notes\r\n    special_instructions: z.string().optional(),\r\n    internal_notes: z.string().optional(),\r\n});\r\n\r\nexport type CreateOrderInput = z.infer<typeof createOrderSchema>;\r\n\r\n// Update order schema (for PATCH requests)\r\nexport const updateOrderSchema = createOrderSchema.partial().extend({\r\n    status: orderStatusSchema.optional(),\r\n    assigned_driver_id: z.string().uuid().optional(),\r\n});\r\n\r\nexport type UpdateOrderInput = z.infer<typeof updateOrderSchema>;\r\n\r\n// Full order schema (from database)\r\nexport const orderSchema = createOrderSchema.extend({\r\n    id: z.string().uuid(),\r\n    created_at: z.string().datetime(),\r\n    updated_at: z.string().datetime(),\r\n    status: orderStatusSchema,\r\n    assigned_driver_id: z.string().uuid().nullable().optional(),\r\n});\r\n\r\nexport type Order = z.infer<typeof orderSchema>;\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAGO,MAAM,kBAAkB,oLAAC,CAAC,MAAM,CAAC;IACpC,MAAM,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,UAAU,oLAAC,CAAC,MAAM,GAAG,GAAG,GAAG,QAAQ,CAAC;IACpC,QAAQ,oLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IACtC,OAAO,oLAAC,CAAC,MAAM,GAAG,QAAQ;AAC9B;AAKO,MAAM,oBAAoB,oLAAC,CAAC,IAAI,CAAC;IACpC;IACA;IACA;IACA;IACA;IACA;IACA;CACH;AAKM,MAAM,oBAAoB,oLAAC,CAAC,MAAM,CAAC;IACtC,mBAAmB;IACnB,eAAe,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACjC,gBAAgB,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI;IACnC,gBAAgB,oLAAC,CAAC,MAAM,GAAG,KAAK,GAAG,QAAQ,GAAG,EAAE,CAAC,oLAAC,CAAC,OAAO,CAAC;IAE3D,kBAAkB;IAClB,gBAAgB,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IAClC,YAAY,oLAAC,CAAC,MAAM,GAAG,QAAQ;IAC/B,YAAY,oLAAC,CAAC,MAAM,GAAG,QAAQ;IAC/B,qBAAqB,oLAAC,CAAC,MAAM,GAAG,QAAQ;IACxC,sBAAsB,oLAAC,CAAC,MAAM,GAAG,QAAQ;IAEzC,oBAAoB;IACpB,iBAAiB,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACnC,aAAa,oLAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,aAAa,oLAAC,CAAC,MAAM,GAAG,QAAQ;IAChC,sBAAsB,oLAAC,CAAC,MAAM,GAAG,QAAQ;IACzC,uBAAuB,oLAAC,CAAC,MAAM,GAAG,QAAQ;IAE1C,QAAQ;IACR,OAAO,oLAAC,CAAC,KAAK,CAAC,iBAAiB,GAAG,CAAC,GAAG;IAEvC,eAAe;IACf,0BAA0B,oLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IACxD,wBAAwB,oLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IACtD,2BAA2B,oLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IACzD,yBAAyB,oLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ;IAEvD,QAAQ;IACR,sBAAsB,oLAAC,CAAC,MAAM,GAAG,QAAQ;IACzC,gBAAgB,oLAAC,CAAC,MAAM,GAAG,QAAQ;AACvC;AAKO,MAAM,oBAAoB,kBAAkB,OAAO,GAAG,MAAM,CAAC;IAChE,QAAQ,kBAAkB,QAAQ;IAClC,oBAAoB,oLAAC,CAAC,MAAM,GAAG,IAAI,GAAG,QAAQ;AAClD;AAKO,MAAM,cAAc,kBAAkB,MAAM,CAAC;IAChD,IAAI,oLAAC,CAAC,MAAM,GAAG,IAAI;IACnB,YAAY,oLAAC,CAAC,MAAM,GAAG,QAAQ;IAC/B,YAAY,oLAAC,CAAC,MAAM,GAAG,QAAQ;IAC/B,QAAQ;IACR,oBAAoB,oLAAC,CAAC,MAAM,GAAG,IAAI,GAAG,QAAQ,GAAG,QAAQ;AAC7D"}},
    {"offset": {"line": 150, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/auth-context.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AuthProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/shared/src/auth-context.tsx <module evaluation>\",\n    \"AuthProvider\",\n);\nexport const useAuth = registerClientReference(\n    function() { throw new Error(\"Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/shared/src/auth-context.tsx <module evaluation>\",\n    \"useAuth\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,0QAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,sEACA;AAEG,MAAM,UAAU,IAAA,0QAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,sEACA","ignoreList":[0]}},
    {"offset": {"line": 169, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/auth-context.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const AuthProvider = registerClientReference(\n    function() { throw new Error(\"Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/shared/src/auth-context.tsx\",\n    \"AuthProvider\",\n);\nexport const useAuth = registerClientReference(\n    function() { throw new Error(\"Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/packages/shared/src/auth-context.tsx\",\n    \"useAuth\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;;;AACvE;;AACO,MAAM,eAAe,IAAA,0QAAuB,EAC/C;IAAa,MAAM,IAAI,MAAM;AAAwO,GACrQ,kDACA;AAEG,MAAM,UAAU,IAAA,0QAAuB,EAC1C;IAAa,MAAM,IAAI,MAAM;AAA8N,GAC3P,kDACA","ignoreList":[0]}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 196, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr';\r\n\r\nexport function createClient() {\r\n    return createBrowserClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,SAAS;IACZ,OAAO,IAAA,mMAAmB;AAI9B"}},
    {"offset": {"line": 210, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/supabase/middleware.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr';\r\nimport { NextResponse, type NextRequest } from 'next/server';\r\n\r\nexport async function updateSession(request: NextRequest) {\r\n    let supabaseResponse = NextResponse.next({\r\n        request,\r\n    });\r\n\r\n    const supabase = createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookies: {\r\n                getAll() {\r\n                    return request.cookies.getAll();\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    cookiesToSet.forEach(({ name, value }) => request.cookies.set(name, value));\r\n                    supabaseResponse = NextResponse.next({\r\n                        request,\r\n                    });\r\n                    cookiesToSet.forEach(({ name, value, options }) =>\r\n                        supabaseResponse.cookies.set(name, value, options)\r\n                    );\r\n                },\r\n            },\r\n        }\r\n    );\r\n\r\n    const {\r\n        data: { user },\r\n    } = await supabase.auth.getUser();\r\n\r\n    // Public paths that don't require authentication\r\n    const publicPaths = ['/', '/signin', '/signup', '/callback', '/signout'];\r\n    const isPublicPath = publicPaths.some(path => request.nextUrl.pathname === path);\r\n\r\n    // Redirect unauthenticated users to signin\r\n    if (!user && !isPublicPath) {\r\n        const url = request.nextUrl.clone();\r\n        url.pathname = '/signin';\r\n        return NextResponse.redirect(url);\r\n    }\r\n\r\n    // Redirect authenticated users from auth pages to dashboard\r\n    if (user && (request.nextUrl.pathname === '/signin' || request.nextUrl.pathname === '/signup')) {\r\n        const url = request.nextUrl.clone();\r\n        url.pathname = '/dashboard';\r\n        return NextResponse.redirect(url);\r\n    }\r\n\r\n    return supabaseResponse;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe,cAAc,OAAoB;IACpD,IAAI,mBAAmB,gJAAY,CAAC,IAAI,CAAC;QACrC;IACJ;IAEA,MAAM,WAAW,IAAA,iMAAkB,sUAG/B;QACI,SAAS;YACL;gBACI,OAAO,QAAQ,OAAO,CAAC,MAAM;YACjC;YACA,QAAO,YAAY;gBACf,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,GAAK,QAAQ,OAAO,CAAC,GAAG,CAAC,MAAM;gBACpE,mBAAmB,gJAAY,CAAC,IAAI,CAAC;oBACjC;gBACJ;gBACA,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC1C,iBAAiB,OAAO,CAAC,GAAG,CAAC,MAAM,OAAO;YAElD;QACJ;IACJ;IAGJ,MAAM,EACF,MAAM,EAAE,IAAI,EAAE,EACjB,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAE/B,iDAAiD;IACjD,MAAM,cAAc;QAAC;QAAK;QAAW;QAAW;QAAa;KAAW;IACxE,MAAM,eAAe,YAAY,IAAI,CAAC,CAAA,OAAQ,QAAQ,OAAO,CAAC,QAAQ,KAAK;IAE3E,2CAA2C;IAC3C,IAAI,CAAC,QAAQ,CAAC,cAAc;QACxB,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;QACjC,IAAI,QAAQ,GAAG;QACf,OAAO,gJAAY,CAAC,QAAQ,CAAC;IACjC;IAEA,4DAA4D;IAC5D,IAAI,QAAQ,CAAC,QAAQ,OAAO,CAAC,QAAQ,KAAK,aAAa,QAAQ,OAAO,CAAC,QAAQ,KAAK,SAAS,GAAG;QAC5F,MAAM,MAAM,QAAQ,OAAO,CAAC,KAAK;QACjC,IAAI,QAAQ,GAAG;QACf,OAAO,gJAAY,CAAC,QAAQ,CAAC;IACjC;IAEA,OAAO;AACX"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/supabase/index.ts"],"sourcesContent":["// Re-export Supabase utilities for client-side use\r\n// Note: Server client is NOT exported from here to avoid importing 'next/headers' in client components\r\n// Import server client directly: import { createClient } from '@repo/shared/supabase/server'\r\nexport { createClient as createBrowserClient } from './client';\r\nexport * from './middleware';\r\n\r\n"],"names":[],"mappings":"AAAA,mDAAmD;AACnD,uGAAuG;AACvG,6FAA6F;;AAC7F;AACA"}},
    {"offset": {"line": 361, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/api/api-client.ts"],"sourcesContent":["import axios, { AxiosInstance } from 'axios';\r\n\r\n/**\r\n * Platform-agnostic API client configuration\r\n * Works in both Next.js and React Native environments\r\n */\r\nexport interface ApiClientConfig {\r\n    baseURL: string;\r\n    timeout?: number;\r\n}\r\n\r\n/**\r\n * Create a configured axios instance for API calls\r\n * Automatically includes credentials for web, handles JSON, and provides error parsing\r\n */\r\nexport function createApiClient(config: ApiClientConfig): AxiosInstance {\r\n    const instance = axios.create({\r\n        baseURL: config.baseURL,\r\n        timeout: config.timeout || 30000,\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        // Include credentials for web (cookies)\r\n        withCredentials: true,\r\n    });\r\n\r\n    // Request interceptor - can add auth tokens here\r\n    instance.interceptors.request.use(\r\n        (config) => {\r\n            // Future: Add auth token from storage\r\n            // const token = getAuthToken();\r\n            // if (token) config.headers.Authorization = `Bearer ${token}`;\r\n            return config;\r\n        },\r\n        (error) => Promise.reject(error)\r\n    );\r\n\r\n    // Response interceptor - standardize error handling\r\n    instance.interceptors.response.use(\r\n        (response) => response,\r\n        (error) => {\r\n            if (error.response) {\r\n                // Server responded with error status\r\n                const apiError = {\r\n                    status: error.response.status,\r\n                    message: error.response.data?.error || error.message,\r\n                    details: error.response.data?.details,\r\n                };\r\n                return Promise.reject(apiError);\r\n            } else if (error.request) {\r\n                // Request made but no response\r\n                return Promise.reject({\r\n                    status: 0,\r\n                    message: 'Network error - no response from server',\r\n                });\r\n            } else {\r\n                // Error setting up request\r\n                return Promise.reject({\r\n                    status: 0,\r\n                    message: error.message,\r\n                });\r\n            }\r\n        }\r\n    );\r\n\r\n    return instance;\r\n}\r\n\r\n/**\r\n * Get the API base URL from environment variables\r\n * Supports both Next.js (NEXT_PUBLIC_) and Expo (EXPO_PUBLIC_)\r\n */\r\nexport function getApiBaseUrl(): string {\r\n    // Next.js environment variable\r\n    if (typeof process !== 'undefined' && process.env?.NEXT_PUBLIC_API_URL) {\r\n        return process.env.NEXT_PUBLIC_API_URL;\r\n    }\r\n\r\n    // Expo environment variable\r\n    if (typeof process !== 'undefined' && process.env?.EXPO_PUBLIC_API_URL) {\r\n        return process.env.EXPO_PUBLIC_API_URL;\r\n    }\r\n\r\n    // Default fallback for development\r\n    return 'http://localhost:3000';\r\n}\r\n\r\n/**\r\n * Default API client instance\r\n * Use this for all API calls\r\n */\r\nexport const apiClient = createApiClient({\r\n    baseURL: getApiBaseUrl(),\r\n});\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAeO,SAAS,gBAAgB,MAAuB;IACnD,MAAM,WAAW,kJAAK,CAAC,MAAM,CAAC;QAC1B,SAAS,OAAO,OAAO;QACvB,SAAS,OAAO,OAAO,IAAI;QAC3B,SAAS;YACL,gBAAgB;QACpB;QACA,wCAAwC;QACxC,iBAAiB;IACrB;IAEA,iDAAiD;IACjD,SAAS,YAAY,CAAC,OAAO,CAAC,GAAG,CAC7B,CAAC;QACG,sCAAsC;QACtC,gCAAgC;QAChC,+DAA+D;QAC/D,OAAO;IACX,GACA,CAAC,QAAU,QAAQ,MAAM,CAAC;IAG9B,oDAAoD;IACpD,SAAS,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC9B,CAAC,WAAa,UACd,CAAC;QACG,IAAI,MAAM,QAAQ,EAAE;YAChB,qCAAqC;YACrC,MAAM,WAAW;gBACb,QAAQ,MAAM,QAAQ,CAAC,MAAM;gBAC7B,SAAS,MAAM,QAAQ,CAAC,IAAI,EAAE,SAAS,MAAM,OAAO;gBACpD,SAAS,MAAM,QAAQ,CAAC,IAAI,EAAE;YAClC;YACA,OAAO,QAAQ,MAAM,CAAC;QAC1B,OAAO,IAAI,MAAM,OAAO,EAAE;YACtB,+BAA+B;YAC/B,OAAO,QAAQ,MAAM,CAAC;gBAClB,QAAQ;gBACR,SAAS;YACb;QACJ,OAAO;YACH,2BAA2B;YAC3B,OAAO,QAAQ,MAAM,CAAC;gBAClB,QAAQ;gBACR,SAAS,MAAM,OAAO;YAC1B;QACJ;IACJ;IAGJ,OAAO;AACX;AAMO,SAAS;IACZ,+BAA+B;IAC/B,IAAI,OAAO,YAAY,0EAAiD;QACpE;IACJ;IAEA,4BAA4B;IAC5B,IAAI,OAAO,YAAY,eAAe,QAAQ,GAAG,EAAE,qBAAqB;QACpE,OAAO,QAAQ,GAAG,CAAC,mBAAmB;IAC1C;IAEA,mCAAmC;IACnC,OAAO;AACX;AAMO,MAAM,YAAY,gBAAgB;IACrC,SAAS;AACb"}},
    {"offset": {"line": 433, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 439, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/api/query-client.ts"],"sourcesContent":["import { QueryClient } from '@tanstack/react-query';\r\n\r\n/**\r\n * Create a pre-configured QueryClient with sensible defaults\r\n * Use this factory to ensure consistent configuration across web and mobile apps\r\n */\r\nexport function createQueryClient(): QueryClient {\r\n    return new QueryClient({\r\n        defaultOptions: {\r\n            queries: {\r\n                // Cache data for 5 minutes\r\n                staleTime: 5 * 60 * 1000,\r\n\r\n                // Keep unused data in cache for 10 minutes\r\n                gcTime: 10 * 60 * 1000,\r\n\r\n                // Don't refetch on window focus by default\r\n                refetchOnWindowFocus: false,\r\n\r\n                // Retry failed requests once\r\n                retry: 1,\r\n\r\n                // Retry delay: 1 second\r\n                retryDelay: 1000,\r\n            },\r\n            mutations: {\r\n                // Retry failed mutations once\r\n                retry: 1,\r\n            },\r\n        },\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAMO,SAAS;IACZ,OAAO,IAAI,8LAAW,CAAC;QACnB,gBAAgB;YACZ,SAAS;gBACL,2BAA2B;gBAC3B,WAAW,IAAI,KAAK;gBAEpB,2CAA2C;gBAC3C,QAAQ,KAAK,KAAK;gBAElB,2CAA2C;gBAC3C,sBAAsB;gBAEtB,6BAA6B;gBAC7B,OAAO;gBAEP,wBAAwB;gBACxB,YAAY;YAChB;YACA,WAAW;gBACP,8BAA8B;gBAC9B,OAAO;YACX;QACJ;IACJ;AACJ"}},
    {"offset": {"line": 471, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/api/query-keys.ts"],"sourcesContent":["import type { GetOrdersParams } from './api-types';\r\n\r\n/**\r\n * Query Key Factory\r\n * Centralized query key management for React Query cache\r\n * \r\n * Benefits:\r\n * - Type-safe query keys\r\n * - Easy cache invalidation\r\n * - Consistent naming across the app\r\n */\r\n\r\nexport const queryKeys = {\r\n    /**\r\n     * Orders query keys\r\n     */\r\n    orders: {\r\n        // Base key for all orders queries\r\n        all: ['orders'] as const,\r\n\r\n        // Keys for list queries\r\n        lists: () => [...queryKeys.orders.all, 'list'] as const,\r\n        list: (params?: GetOrdersParams) =>\r\n            [...queryKeys.orders.lists(), params ?? {}] as const,\r\n\r\n        // Keys for detail queries\r\n        details: () => [...queryKeys.orders.all, 'detail'] as const,\r\n        detail: (id: string) =>\r\n            [...queryKeys.orders.details(), id] as const,\r\n    },\r\n\r\n    // Future: Add more resource query keys here\r\n    // drivers: { ... },\r\n    // deliveries: { ... },\r\n};\r\n\r\n/**\r\n * Usage examples:\r\n * \r\n * // Invalidate all orders queries\r\n * queryClient.invalidateQueries({ queryKey: queryKeys.orders.all });\r\n * \r\n * // Invalidate specific order list\r\n * queryClient.invalidateQueries({ queryKey: queryKeys.orders.list({ status: 'pending' }) });\r\n * \r\n * // Invalidate specific order detail\r\n * queryClient.invalidateQueries({ queryKey: queryKeys.orders.detail('123') });\r\n */\r\n"],"names":[],"mappings":";;;;AAYO,MAAM,YAAY;IACrB;;KAEC,GACD,QAAQ;QACJ,kCAAkC;QAClC,KAAK;YAAC;SAAS;QAEf,wBAAwB;QACxB,OAAO,IAAM;mBAAI,UAAU,MAAM,CAAC,GAAG;gBAAE;aAAO;QAC9C,MAAM,CAAC,SACH;mBAAI,UAAU,MAAM,CAAC,KAAK;gBAAI,UAAU,CAAC;aAAE;QAE/C,0BAA0B;QAC1B,SAAS,IAAM;mBAAI,UAAU,MAAM,CAAC,GAAG;gBAAE;aAAS;QAClD,QAAQ,CAAC,KACL;mBAAI,UAAU,MAAM,CAAC,OAAO;gBAAI;aAAG;IAC3C;AAKJ,GAEA;;;;;;;;;;;CAWC"}},
    {"offset": {"line": 518, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/api/hooks/use-orders.ts"],"sourcesContent":["import { useQuery, useMutation, useQueryClient, UseQueryResult, UseMutationResult } from '@tanstack/react-query';\r\nimport { apiClient } from '../api-client';\r\nimport { queryKeys } from '../query-keys';\r\nimport type {\r\n    GetOrdersParams,\r\n    GetOrdersResponse,\r\n    CreateOrderRequest,\r\n    CreateOrderResponse,\r\n    UpdateOrderRequest,\r\n    UpdateOrderResponse,\r\n    GetOrderByIdResponse,\r\n} from '../api-types';\r\n\r\n/**\r\n * Fetch all orders with optional filters\r\n * @param params - Optional filters (status, limit, offset)\r\n * @returns Query result with orders data\r\n */\r\nexport function useOrders(params?: GetOrdersParams): UseQueryResult<GetOrdersResponse, Error> {\r\n    return useQuery({\r\n        queryKey: queryKeys.orders.list(params),\r\n        queryFn: async () => {\r\n            const response = await apiClient.get<GetOrdersResponse>('/api/orders', {\r\n                params,\r\n            });\r\n            return response.data;\r\n        },\r\n    });\r\n}\r\n\r\n/**\r\n * Fetch a single order by ID\r\n * @param id - Order ID\r\n * @param enabled - Whether the query should run (defaults to true)\r\n * @returns Query result with order data\r\n */\r\nexport function useOrder(\r\n    id: string,\r\n    enabled: boolean = true\r\n): UseQueryResult<GetOrderByIdResponse, Error> {\r\n    return useQuery({\r\n        queryKey: queryKeys.orders.detail(id),\r\n        queryFn: async () => {\r\n            const response = await apiClient.get<GetOrderByIdResponse>(`/api/orders/${id}`);\r\n            return response.data;\r\n        },\r\n        enabled: enabled && !!id,\r\n    });\r\n}\r\n\r\n/**\r\n * Create a new order\r\n * @returns Mutation result with mutate/mutateAsync functions\r\n */\r\nexport function useCreateOrder(): UseMutationResult<\r\n    CreateOrderResponse,\r\n    Error,\r\n    CreateOrderRequest,\r\n    unknown\r\n> {\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async (orderData: CreateOrderRequest) => {\r\n            const response = await apiClient.post<CreateOrderResponse>('/api/orders', orderData);\r\n            return response.data;\r\n        },\r\n        onSuccess: () => {\r\n            // Invalidate all order lists to refetch with new data\r\n            queryClient.invalidateQueries({ queryKey: queryKeys.orders.lists() });\r\n        },\r\n    });\r\n}\r\n\r\n/**\r\n * Update an existing order\r\n * @returns Mutation result with mutate/mutateAsync functions\r\n */\r\nexport function useUpdateOrder(): UseMutationResult<\r\n    UpdateOrderResponse,\r\n    Error,\r\n    { id: string; data: UpdateOrderRequest },\r\n    unknown\r\n> {\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async ({ id, data }: { id: string; data: UpdateOrderRequest }) => {\r\n            const response = await apiClient.patch<UpdateOrderResponse>(`/api/orders/${id}`, data);\r\n            return response.data;\r\n        },\r\n        onSuccess: (_data, variables) => {\r\n            // Invalidate both the specific order and the lists\r\n            queryClient.invalidateQueries({ queryKey: queryKeys.orders.detail(variables.id) });\r\n            queryClient.invalidateQueries({ queryKey: queryKeys.orders.lists() });\r\n        },\r\n    });\r\n}\r\n\r\n/**\r\n * Delete an order\r\n * @returns Mutation result with mutate/mutateAsync functions\r\n */\r\nexport function useDeleteOrder(): UseMutationResult<void, Error, string, unknown> {\r\n    const queryClient = useQueryClient();\r\n\r\n    return useMutation({\r\n        mutationFn: async (id: string) => {\r\n            await apiClient.delete(`/api/orders/${id}`);\r\n        },\r\n        onSuccess: (_, id) => {\r\n            // Remove from cache and invalidate lists\r\n            queryClient.removeQueries({ queryKey: queryKeys.orders.detail(id) });\r\n            queryClient.invalidateQueries({ queryKey: queryKeys.orders.lists() });\r\n        },\r\n    });\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAAA;AACA;AACA;;;;AAgBO,SAAS,UAAU,MAAwB;IAC9C,OAAO,IAAA,yLAAQ,EAAC;QACZ,UAAU,gKAAS,CAAC,MAAM,CAAC,IAAI,CAAC;QAChC,SAAS;YACL,MAAM,WAAW,MAAM,gKAAS,CAAC,GAAG,CAAoB,eAAe;gBACnE;YACJ;YACA,OAAO,SAAS,IAAI;QACxB;IACJ;AACJ;AAQO,SAAS,SACZ,EAAU,EACV,UAAmB,IAAI;IAEvB,OAAO,IAAA,yLAAQ,EAAC;QACZ,UAAU,gKAAS,CAAC,MAAM,CAAC,MAAM,CAAC;QAClC,SAAS;YACL,MAAM,WAAW,MAAM,gKAAS,CAAC,GAAG,CAAuB,CAAC,YAAY,EAAE,IAAI;YAC9E,OAAO,SAAS,IAAI;QACxB;QACA,SAAS,WAAW,CAAC,CAAC;IAC1B;AACJ;AAMO,SAAS;IAMZ,MAAM,cAAc,IAAA,0MAAc;IAElC,OAAO,IAAA,+LAAW,EAAC;QACf,YAAY,OAAO;YACf,MAAM,WAAW,MAAM,gKAAS,CAAC,IAAI,CAAsB,eAAe;YAC1E,OAAO,SAAS,IAAI;QACxB;QACA,WAAW;YACP,sDAAsD;YACtD,YAAY,iBAAiB,CAAC;gBAAE,UAAU,gKAAS,CAAC,MAAM,CAAC,KAAK;YAAG;QACvE;IACJ;AACJ;AAMO,SAAS;IAMZ,MAAM,cAAc,IAAA,0MAAc;IAElC,OAAO,IAAA,+LAAW,EAAC;QACf,YAAY,OAAO,EAAE,EAAE,EAAE,IAAI,EAA4C;YACrE,MAAM,WAAW,MAAM,gKAAS,CAAC,KAAK,CAAsB,CAAC,YAAY,EAAE,IAAI,EAAE;YACjF,OAAO,SAAS,IAAI;QACxB;QACA,WAAW,CAAC,OAAO;YACf,mDAAmD;YACnD,YAAY,iBAAiB,CAAC;gBAAE,UAAU,gKAAS,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,EAAE;YAAE;YAChF,YAAY,iBAAiB,CAAC;gBAAE,UAAU,gKAAS,CAAC,MAAM,CAAC,KAAK;YAAG;QACvE;IACJ;AACJ;AAMO,SAAS;IACZ,MAAM,cAAc,IAAA,0MAAc;IAElC,OAAO,IAAA,+LAAW,EAAC;QACf,YAAY,OAAO;YACf,MAAM,gKAAS,CAAC,MAAM,CAAC,CAAC,YAAY,EAAE,IAAI;QAC9C;QACA,WAAW,CAAC,GAAG;YACX,yCAAyC;YACzC,YAAY,aAAa,CAAC;gBAAE,UAAU,gKAAS,CAAC,MAAM,CAAC,MAAM,CAAC;YAAI;YAClE,YAAY,iBAAiB,CAAC;gBAAE,UAAU,gKAAS,CAAC,MAAM,CAAC,KAAK;YAAG;QACvE;IACJ;AACJ"}},
    {"offset": {"line": 613, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/packages/shared/src/index.ts"],"sourcesContent":["// Shared utilities, schemas, auth, and Supabase client\r\nexport * from './schemas/order';\r\nexport * from './auth-context';\r\nexport * from './supabase';\r\n\r\n// API utilities and React Query hooks\r\nexport * from './api/api-client';\r\nexport * from './api/api-types';\r\nexport * from './api/query-client';\r\nexport * from './api/query-keys';\r\nexport * from './api/hooks/use-orders';\r\n\r\n"],"names":[],"mappings":"AAAA,uDAAuD;;AACvD;AACA;AACA;AAEA,sCAAsC;AACtC;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 636, "column": 0}, "map": {"version":3,"sources":["file:///D:/Work/FYP/order-automation/apps/web/src/app/api/orders/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { createClient } from '@/lib/supabase/server';\r\nimport { createOrderSchema, type Order } from '@repo/shared';\r\n\r\n// POST /api/orders - Create new order\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const body = await request.json();\r\n\r\n        // Validate request body\r\n        const validationResult = createOrderSchema.safeParse(body);\r\n\r\n        if (!validationResult.success) {\r\n            return NextResponse.json(\r\n                { error: 'Validation failed', details: validationResult.error.issues },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        const orderData = validationResult.data;\r\n\r\n        // Get Supabase client\r\n        const supabase = await createClient();\r\n\r\n        // Check authentication\r\n        const { data: { user }, error: authError } = await supabase.auth.getUser();\r\n\r\n        if (authError || !user) {\r\n            return NextResponse.json(\r\n                { error: 'Unauthorized' },\r\n                { status: 401 }\r\n            );\r\n        }\r\n\r\n        // Insert order\r\n        const { data, error } = await supabase\r\n            .from('orders')\r\n            .insert([{\r\n                ...orderData,\r\n                status: 'pending',\r\n            }])\r\n            .select()\r\n            .single();\r\n\r\n        if (error) {\r\n            console.error('Database error:', error);\r\n            return NextResponse.json(\r\n                { error: 'Failed to create order' },\r\n                { status: 500 }\r\n            );\r\n        }\r\n\r\n        return NextResponse.json(data, { status: 201 });\r\n\r\n    } catch (error) {\r\n        console.error('Server error:', error);\r\n        return NextResponse.json(\r\n            { error: 'Internal server error' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\n// GET /api/orders - List all orders\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        const supabase = await createClient();\r\n\r\n        // Check authentication\r\n        const { data: { user }, error: authError } = await supabase.auth.getUser();\r\n\r\n        if (authError || !user) {\r\n            return NextResponse.json(\r\n                { error: 'Unauthorized' },\r\n                { status: 401 }\r\n            );\r\n        }\r\n\r\n        // Get query parameters\r\n        const { searchParams } = new URL(request.url);\r\n        const status = searchParams.get('status');\r\n        const limit = parseInt(searchParams.get('limit') || '50');\r\n        const offset = parseInt(searchParams.get('offset') || '0');\r\n\r\n        // Build query\r\n        let query = supabase\r\n            .from('orders')\r\n            .select('*', { count: 'exact' })\r\n            .order('created_at', { ascending: false })\r\n            .range(offset, offset + limit - 1);\r\n\r\n        // Filter by status if provided\r\n        if (status) {\r\n            query = query.eq('status', status);\r\n        }\r\n\r\n        const { data, error, count } = await query;\r\n\r\n        if (error) {\r\n            console.error('Database error:', error);\r\n            return NextResponse.json(\r\n                { error: 'Failed to fetch orders' },\r\n                { status: 500 }\r\n            );\r\n        }\r\n\r\n        return NextResponse.json({\r\n            orders: data,\r\n            total: count,\r\n            limit,\r\n            offset,\r\n        });\r\n\r\n    } catch (error) {\r\n        console.error('Server error:', error);\r\n        return NextResponse.json(\r\n            { error: 'Internal server error' },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}